# Создадим форму для ввода сообщения.


```html
<form class="feedback-form">
  <textarea name="message"></textarea>
  <button type="submit">Send feedback</button>
</form>
```

```js
const form = document.querySelector(".feedback-form");
const localStorageKey = "goit-example-message";

form.elements.message.value = localStorage.getItem(localStorageKey) ?? "";

form.addEventListener("input", (evt) => {
  localStorage.setItem(localStorageKey, evt.target.value);
});

form.addEventListener("submit", (evt) => {
  evt.preventDefault();
  localStorage.removeItem(localStorageKey);
  form.reset();
});
```

> [!done]
> Теперь при обновлении страницы текст в текстовом поле будет востановлен с [[Постоянное хранилище localStorage|Локального хранилища]]
> 
> После нажатия кнопки **“Отправить”**:
> 1. Если есть **сохраненные данные**, они **автоматически заполняют поле**.
> 2. При каждом изменении текста **он сохраняется в localStorage**.
> 3. Поле отправки формы **данные удаляются и поле очищается**.

---
## Разбор кода
### 1. Получаем форму и создаем ключ для хранилища

```js
const form = document.querySelector(".feedback-form");
const localStorageKey = "goit-example-message";
```

> [!info]
> • **document.querySelector(".feedback-form")** – выбираем форму по классу .feedback-form и сохраняем в переменную form.
> • **const localStorageKey = "goit-example-message"** – задаем **ключ** для хранения данных в localStorage. Теперь все данные формы будут сохранены под этим именем.

---
### 2. Заполняем поле ввода из localStorage (если данные есть)

```js
form.elements.message.value = localStorage.getItem(localStorageKey) ?? "";
```

> [!info]
> • **form.elements.message** – это доступ к `<textarea name="message">` внутри формы.
• **localStorage.getItem(localStorageKey)** – получаем сохраненное значение из localStorage.
• **?? "" (оператор нулевого слияния)** – если localStorage.getItem() вернет null, вместо него установится пустая строка (""). Это нужно, чтобы избежать ошибки при первой загрузке.

---
### 3. Сохраняем введенные данные в localStorage при вводе

```js
form.addEventListener("input", (evt) => {
  localStorage.setItem(localStorageKey, evt.target.value);
});
```

> [!info]
> • **form.addEventListener("input", (evt) => {...})** – отслеживаем ввод (input) в поле формы.
• **evt.target.value** – получаем текущее значение, которое ввел пользователь.
• **localStorage.setItem(localStorageKey, evt.target.value)** – сохраняем введенный текст в localStorage.

---
### 4. Очищаем localStorage и форму при отправке

```js
form.addEventListener("submit", (evt) => {
  evt.preventDefault();
  localStorage.removeItem(localStorageKey);
  form.reset();
});
```

> [!info]
> • **evt.preventDefault();** – отменяет стандартное поведение формы (по умолчанию форма отправляется и страница перезагружается).
• **localStorage.removeItem(localStorageKey);** – удаляет сохраненные данные из localStorage, так как форма отправлена.
• **form.reset();** – очищает все поля формы.
