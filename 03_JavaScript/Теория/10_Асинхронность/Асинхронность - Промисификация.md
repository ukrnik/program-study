## **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å ‚Äî –ü—Ä–æ–º–∏—Å–∏—Ñ–∏–∫–∞—Ü–∏—è**

**–ü—Ä–æ–º–∏—Å–∏—Ñ–∏–∫–∞—Ü–∏—è** ‚Äî —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ —Å [[–§—É–Ω–∫—Ü–∏—è Callback]] –≤ —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç [[–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å - Promise]].  
–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º –∫–æ–¥–æ–º –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º —Å—Ç–∏–ª–µ: —á–µ—Ä–µ–∑ `.then()` –∏ `async/await`.

---
## üìå –î–ª—è —á–µ–≥–æ –Ω—É–∂–Ω–∞

- –£–ø—Ä–æ—â–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏.  
- –ò–∑–±–∞–≤–ª—è–µ—Ç –æ—Ç ¬´–∞–¥–∞ –∫–æ–ª–ª–±–µ–∫–æ–≤¬ª (callback hell).  
- –î–µ–ª–∞–µ—Ç –∫–æ–¥ –±–æ–ª–µ–µ —á–∏—Ç–∞–µ–º—ã–º –∏ —É–¥–æ–±–Ω—ã–º –¥–ª—è —Ü–µ–ø–æ—á–µ–∫ (`.then`) –∏ `await`.

---
## üîπ –°—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã

–ë—ã–ª–æ (–∫–æ–ª–ª–±–µ–∫): 

```js
function oldFunc(arg, callback) {
  setTimeout(() => {
    if (arg) {
      callback(null, "‚úÖ –£—Å–ø–µ—Ö");
    } else {
      callback("‚ùå –û—à–∏–±–∫–∞");
    }
  }, 1000);
}

oldFunc(true, (err, result) => {
  if (err) console.error(err);
  else console.log(result);
});
```

–°—Ç–∞–ª–æ (–ø—Ä–æ–º–∏—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–æ):

```js
function newFunc(arg) {
  return new Promise((resolve, reject) => {
    setTimeout(() => {
      if (arg) {
        resolve("‚úÖ –£—Å–ø–µ—Ö");
      } else {
        reject("‚ùå –û—à–∏–±–∫–∞");
      }
    }, 1000);
  });
}

newFunc(true)
  .then(result => console.log(result))
  .catch(err => console.error(err));
```

---
## **üîπ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Ö–µ–ª–ø–µ—Ä –¥–ª—è –ø—Ä–æ–º–∏—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏**

–ú–æ–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –ø—Ä–µ–≤—Ä–∞—â–∞—Ç—å –∫–æ–ª–ª–±–µ–∫-—Ñ—É–Ω–∫—Ü–∏–∏ –≤ –ø—Ä–æ–º–∏—Å—ã:

```js
function promisify(fn) {
  return function(...args) {
    return new Promise((resolve, reject) => {
      fn(...args, (err, result) => {
        if (err) reject(err);
        else resolve(result);
      });
    });
  };
}
```

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

```js
const fs = require("fs");

// –û–±—ã—á–Ω—ã–π callback-–≤–∞—Ä–∏–∞–Ω—Ç
// fs.readFile("file.txt", "utf8", (err, data) => { ... });

// –ü—Ä–æ–º–∏—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç
const readFilePromise = promisify(fs.readFile);

readFilePromise("file.txt", "utf8")
  .then(data => console.log(data))
  .catch(err => console.error(err));
```

---
## **üîπ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å [[–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å - async await]]**

```js
async function run() {
  try {
    const result = await newFunc(true);
    console.log(result);
  } catch (err) {
    console.error(err);
  }
}

run();
```

---
## **üìå –ò—Ç–æ–≥**

- –ü—Ä–æ–º–∏—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **—Å—Ç–∞—Ä—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å –∫–æ–ª–ª–±–µ–∫–∞–º–∏** –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º —Å—Ç–∏–ª–µ —Å Promise –∏ async/await.
- –£–ø—Ä–æ—â–∞–µ—Ç —á—Ç–µ–Ω–∏–µ –∫–æ–¥–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫.
- –í Node.js –µ—Å—Ç—å –≥–æ—Ç–æ–≤–∞—è —É—Ç–∏–ª–∏—Ç–∞ util.promisify, –Ω–æ –º–æ–∂–Ω–æ –ø–∏—Å–∞—Ç—å –∏ —Å–≤–æ–∏ –æ–±—ë—Ä—Ç–∫–∏.